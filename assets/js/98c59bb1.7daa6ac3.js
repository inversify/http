"use strict";(self.webpackChunk_inversifyjs_inversify_http_docs_site=self.webpackChunk_inversifyjs_inversify_http_docs_site||[]).push([["898"],{7415:function(e,r,i){i.r(r),i.d(r,{frontMatter:()=>d,toc:()=>o,default:()=>h,metadata:()=>n,assets:()=>p,contentTitle:()=>l});var n=JSON.parse('{"id":"fundamentals/pipe","title":"Pipe","description":"Pipes transform or validate individual parameters. They run right after a parameter is extracted (e.g., from query, params, headers, cookies, or body). A pipe can return a new value to replace the parameter, or throw an ErrorHttpResponse to short-circuit the request.","source":"@site/docs/fundamentals/pipe.mdx","sourceDirName":"fundamentals","slug":"/fundamentals/pipe","permalink":"/http/docs/fundamentals/pipe","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Pipe"},"sidebar":"tutorialSidebar","previous":{"title":"Middleware","permalink":"/http/docs/fundamentals/middleware"},"next":{"title":"Decorator","permalink":"/http/docs/api/decorators"}}'),t=i(4076),a=i(9221),s=i(7419);let d={sidebar_position:4,title:"Pipe"},l="Pipe",p={},o=[{value:"Example: Parse number with validation",id:"example-parse-number-with-validation",level:2},{value:"Attaching pipes",id:"attaching-pipes",level:2}];function c(e){let r={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,a.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"pipe",children:"Pipe"})}),"\n",(0,t.jsxs)(r.p,{children:["Pipes transform or validate individual parameters. They run right after a parameter is extracted (e.g., from query, params, headers, cookies, or body). A pipe can return a new value to replace the parameter, or throw an ",(0,t.jsx)(r.code,{children:"ErrorHttpResponse"})," to short-circuit the request."]}),"\n",(0,t.jsx)(r.p,{children:"Key points"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["Implement the ",(0,t.jsx)(r.code,{children:"Pipe<TIn, TOut>"})," interface: ",(0,t.jsx)(r.code,{children:"execute(input, metadata)"})," and return the transformed value"]}),"\n",(0,t.jsxs)(r.li,{children:["Throw an ",(0,t.jsx)(r.code,{children:"ErrorHttpResponse"})," (e.g., ",(0,t.jsx)(r.code,{children:"BadRequestHttpResponse"}),") to send an error immediately"]}),"\n",(0,t.jsxs)(r.li,{children:["Attach pipes directly in parameter decorators: ",(0,t.jsx)(r.code,{children:"@Query('v', MyPipe)"})," or ",(0,t.jsx)(r.code,{children:"@Params('id', new MyPipe())"})]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"example-parse-number-with-validation",children:"Example: Parse number with validation"}),"\n",(0,t.jsxs)(r.p,{children:["A simple pipe that parses the input into a number and rejects invalid values with a ",(0,t.jsx)(r.code,{children:"400 Bad Request"}),"."]}),"\n",(0,t.jsx)(s.Z,{language:"ts",children:"export class ParseNumberPipe implements Pipe<unknown, number> {\n  public execute(input: unknown): number {\n    const parsed: number = Number(input);\n\n    if (Number.isNaN(parsed)) {\n      throw new BadRequestHttpResponse('Invalid number');\n    }\n\n    return parsed;\n  }\n}"}),"\n",(0,t.jsx)(r.h2,{id:"attaching-pipes",children:"Attaching pipes"}),"\n",(0,t.jsxs)(r.p,{children:["Use parameter decorators to attach pipes where needed: ",(0,t.jsx)(r.code,{children:"Body"}),", ",(0,t.jsx)(r.code,{children:"Params"}),", ",(0,t.jsx)(r.code,{children:"Query"}),", ",(0,t.jsx)(r.code,{children:"Headers"}),", ",(0,t.jsx)(r.code,{children:"Cookies"}),", ",(0,t.jsx)(r.code,{children:"Request"}),", and ",(0,t.jsx)(r.code,{children:"Response"})," all accept pipes."]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["Named parameter: ",(0,t.jsx)(r.code,{children:"@Params('id', ParseNumberPipe) id: number"})]}),"\n",(0,t.jsxs)(r.li,{children:["Whole object: ",(0,t.jsx)(r.code,{children:"@Query(ParseNumberPipe) query: QueryObject"})]}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"The adapter will apply global and parameter-level pipes in order before calling your controller method."})]})}function h(e={}){let{wrapper:r}={...(0,a.a)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);